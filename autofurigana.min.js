const is_kanji=n=>/[\u3000-\u303F\u4E00-\u9FEF]/.test(n),autofurigana=(n,t)=>{let a=[],u=0,e="",i="";const l=()=>{a.push([i,e]),e="",i=""};for(let a=0;a<n.length;a++){if(i+=n[a],a+1==n.length){for(;u<t.length;)e+=t[u],u++;is_kanji(n[a])||(e=null),l();break}if(is_kanji(n[a])&&!is_kanji(n[a+1])){for(;n[a+1]!==t[u]||e.length<i.length;){if(void 0===t[u])return null;e+=t[u],u++}l()}else!is_kanji(n[a])&&is_kanji(n[a+1])&&(e=null,u+=i.length,l())}return a},autofurigana_brackets=(n,t)=>{let a=autofurigana(n,t),u="";for(let n=0;n<a.length;n++)null!==a[n][1]?(0!=n&&(u+=" "),u+=a[n][0]+"["+a[n][1]+"]"):u+=a[n][0];return u};export{autofurigana,autofurigana_brackets};